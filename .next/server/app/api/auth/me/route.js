"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_User_Downloads_Compressed_acu_student_utility_4_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/me/route.ts */ \"(rsc)/./app/api/auth/me/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\User\\\\Downloads\\\\Compressed\\\\acu-student-utility_4\\\\app\\\\api\\\\auth\\\\me\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_User_Downloads_Compressed_acu_student_utility_4_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/me/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjE2X3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGYXV0aCUyRm1lJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDVXNlciU1Q0Rvd25sb2FkcyU1Q0NvbXByZXNzZWQlNUNhY3Utc3R1ZGVudC11dGlsaXR5XzQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1VzZXIlNUNEb3dubG9hZHMlNUNDb21wcmVzc2VkJTVDYWN1LXN0dWRlbnQtdXRpbGl0eV80JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQztBQUN4SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FjdS1zdHVkZW50LXV0aWxpdHkvP2FiMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcVXNlclxcXFxEb3dubG9hZHNcXFxcQ29tcHJlc3NlZFxcXFxhY3Utc3R1ZGVudC11dGlsaXR5XzRcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXG1lXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL21lL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9tZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9tZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVzZXJcXFxcRG93bmxvYWRzXFxcXENvbXByZXNzZWRcXFxcYWN1LXN0dWRlbnQtdXRpbGl0eV80XFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxtZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9tZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/me/route.ts":
/*!**********************************!*\
  !*** ./app/api/auth/me/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/middleware */ \"(rsc)/./lib/middleware.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\nconst GET = (0,_lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withAuth)(async (req)=>{\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getUserById)(req.user.userId);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"User not found\"\n            }, {\n                status: 404\n            });\n        }\n        const { password, ...userWithoutPassword } = user;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user: userWithoutPassword\n        });\n    } catch (error) {\n        console.error(\"Get user API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Server error\"\n        }, {\n            status: 500\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQztBQUNDO0FBQ0g7QUFFakMsTUFBTUcsTUFBTUYseURBQVFBLENBQUMsT0FBT0c7SUFDakMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUgsc0RBQVdBLENBQUNFLElBQUlDLElBQUksQ0FBRUMsTUFBTTtRQUUvQyxJQUFJLENBQUNELE1BQU07WUFDVCxPQUFPTCxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO2dCQUFFQyxTQUFTO2dCQUFPQyxTQUFTO1lBQWlCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUN4RjtRQUVBLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdDLHFCQUFxQixHQUFHUDtRQUU3QyxPQUFPTCxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RILE1BQU1PO1FBQ1I7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT2IscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU9DLFNBQVM7UUFBZSxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUN0RjtBQUNGLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hY3Utc3R1ZGVudC11dGlsaXR5Ly4vYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzP2M3MjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IHdpdGhBdXRoIH0gZnJvbSBcIkAvbGliL21pZGRsZXdhcmVcIlxuaW1wb3J0IHsgZ2V0VXNlckJ5SWQgfSBmcm9tIFwiQC9saWIvYXV0aFwiXG5cbmV4cG9ydCBjb25zdCBHRVQgPSB3aXRoQXV0aChhc3luYyAocmVxKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUlkKHJlcS51c2VyIS51c2VySWQpXG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXJcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdXNlcjogdXNlcldpdGhvdXRQYXNzd29yZCxcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJHZXQgdXNlciBBUEkgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlNlcnZlciBlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufSlcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ3aXRoQXV0aCIsImdldFVzZXJCeUlkIiwiR0VUIiwicmVxIiwidXNlciIsInVzZXJJZCIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsInN0YXR1cyIsInBhc3N3b3JkIiwidXNlcldpdGhvdXRQYXNzd29yZCIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   registerUser: () => (/* binding */ registerUser),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/.pnpm/jsonwebtoken@9.0.2/node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/.pnpm/bcryptjs@3.0.2/node_modules/bcryptjs/index.js\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./lib/mongodb.ts\");\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"fallback-secret-key\";\nconst JWT_EXPIRES_IN = \"7d\";\nasync function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, saltRounds);\n}\nasync function verifyPassword(password, hashedPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(password, hashedPassword);\n}\nfunction generateToken(userId, role) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId,\n        role\n    }, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\nfunction verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return decoded;\n    } catch (error) {\n        return null;\n    }\n}\nasync function authenticateUser(email, password) {\n    try {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getDatabase)();\n        // Find user by email\n        const user = await db.collection(\"users\").findOne({\n            email: email.toLowerCase()\n        });\n        if (!user) {\n            return {\n                success: false,\n                message: \"Invalid email or password\"\n            };\n        }\n        if (!user.isActive) {\n            return {\n                success: false,\n                message: \"Account is deactivated\"\n            };\n        }\n        // Verify password\n        const isValidPassword = await verifyPassword(password, user.password);\n        if (!isValidPassword) {\n            return {\n                success: false,\n                message: \"Invalid email or password\"\n            };\n        }\n        // Generate JWT token\n        const token = generateToken(user._id.toString(), user.role);\n        // Remove password from user object\n        const { password: _, ...userWithoutPassword } = user;\n        return {\n            success: true,\n            user: userWithoutPassword,\n            token,\n            message: \"Login successful\"\n        };\n    } catch (error) {\n        console.error(\"Authentication error:\", error);\n        return {\n            success: false,\n            message: \"Authentication failed\"\n        };\n    }\n}\nasync function registerUser(userData) {\n    try {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getDatabase)();\n        // Check if user already exists\n        const existingUser = await db.collection(\"users\").findOne({\n            email: userData.email.toLowerCase()\n        });\n        if (existingUser) {\n            return {\n                success: false,\n                message: \"Email already registered\"\n            };\n        }\n        // Check if matricNumber already exists (for students)\n        if (userData.matricNumber) {\n            const existingMatric = await db.collection(\"users\").findOne({\n                matricNumber: userData.matricNumber\n            });\n            if (existingMatric) {\n                return {\n                    success: false,\n                    message: \"Matric number already registered\"\n                };\n            }\n        }\n        // Hash password\n        const hashedPassword = await hashPassword(userData.password);\n        // Create user object\n        const newUser = {\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_2__.ObjectId(),\n            name: userData.name,\n            email: userData.email.toLowerCase(),\n            password: hashedPassword,\n            matricNumber: userData.matricNumber || null,\n            department: userData.department,\n            role: userData.role,\n            fingerprintHash: null,\n            profilePicture: null,\n            isActive: true,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        // Insert user into database\n        await db.collection(\"users\").insertOne(newUser);\n        // Generate JWT token\n        const token = generateToken(newUser._id.toString(), newUser.role);\n        // Remove password from response\n        const { password: _, ...userWithoutPassword } = newUser;\n        return {\n            success: true,\n            user: userWithoutPassword,\n            token,\n            message: \"Registration successful\"\n        };\n    } catch (error) {\n        console.error(\"Registration error:\", error);\n        return {\n            success: false,\n            message: \"Registration failed\"\n        };\n    }\n}\nasync function getUserById(userId) {\n    try {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getDatabase)();\n        const user = await db.collection(\"users\").findOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_2__.ObjectId(userId)\n        });\n        return user;\n    } catch (error) {\n        console.error(\"Get user error:\", error);\n        return null;\n    }\n}\nasync function updateUser(userId, updateData) {\n    try {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getDatabase)();\n        const result = await db.collection(\"users\").updateOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_2__.ObjectId(userId)\n        }, {\n            $set: {\n                ...updateData,\n                updatedAt: new Date()\n            }\n        });\n        return result.modifiedCount > 0;\n    } catch (error) {\n        console.error(\"Update user error:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNUO0FBQ0Y7QUFFTyxlQUFlZ0MsV0FBV3hDLE1BQWMsRUFBRXlDLFVBQXlCO0lBQ3hFLElBQUk7UUFDRixNQUFNOUIsS0FBSyxNQUFNeEIscURBQVdBO1FBRTVCLE1BQU11RCxTQUFTLE1BQU0vQixHQUFHRSxVQUFVLENBQUMsU0FBUzhCLFNBQVMsQ0FDbkQ7WUFBRXZCLEtBQUssSUFBSWxDLDZDQUFRQSxDQUFDYztRQUFRLEdBQzVCO1lBQ0U0QyxNQUFNO2dCQUNKLEdBQUdILFVBQVU7Z0JBQ2JKLFdBQVcsSUFBSUQ7WUFDakI7UUFDRjtRQUdGLE9BQU9NLE9BQU9HLGFBQWEsR0FBRztJQUNoQyxFQUFFLE9BQU9yQyxPQUFPO1FBQ2RnQixRQUFRaEIsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hY3Utc3R1ZGVudC11dGlsaXR5Ly4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwibW9uZ29kYlwiXG5pbXBvcnQgeyBnZXREYXRhYmFzZSB9IGZyb20gXCIuL21vbmdvZGJcIlxuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcImZhbGxiYWNrLXNlY3JldC1rZXlcIlxuY29uc3QgSldUX0VYUElSRVNfSU4gPSBcIjdkXCJcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgX2lkOiBPYmplY3RJZFxuICBuYW1lOiBzdHJpbmdcbiAgZW1haWw6IHN0cmluZ1xuICBwYXNzd29yZD86IHN0cmluZ1xuICBtYXRyaWNOdW1iZXI/OiBzdHJpbmdcbiAgZGVwYXJ0bWVudDogc3RyaW5nXG4gIHJvbGU6IFwic3R1ZGVudFwiIHwgXCJsZWN0dXJlclwiIHwgXCJhZG1pblwiXG4gIGZpbmdlcnByaW50SGFzaD86IHN0cmluZ1xuICBwcm9maWxlUGljdHVyZT86IHN0cmluZ1xuICBpc0FjdGl2ZTogYm9vbGVhblxuICBjcmVhdGVkQXQ6IERhdGVcbiAgdXBkYXRlZEF0OiBEYXRlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgdXNlcj86IE9taXQ8VXNlciwgXCJwYXNzd29yZFwiPlxuICB0b2tlbj86IHN0cmluZ1xuICBtZXNzYWdlPzogc3RyaW5nXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMlxuICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHVzZXJJZDogc3RyaW5nLCByb2xlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gand0LnNpZ24oeyB1c2VySWQsIHJvbGUgfSwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46IEpXVF9FWFBJUkVTX0lOIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogeyB1c2VySWQ6IHN0cmluZzsgcm9sZTogc3RyaW5nIH0gfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgeyB1c2VySWQ6IHN0cmluZzsgcm9sZTogc3RyaW5nIH1cbiAgICByZXR1cm4gZGVjb2RlZFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8QXV0aFJlc3VsdD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuXG4gICAgLy8gRmluZCB1c2VyIGJ5IGVtYWlsXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHsgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCkgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiIH1cbiAgICB9XG5cbiAgICBpZiAoIXVzZXIuaXNBY3RpdmUpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkFjY291bnQgaXMgZGVhY3RpdmF0ZWRcIiB9XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHBhc3N3b3JkXG4gICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpXG5cbiAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiIH1cbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBKV1QgdG9rZW5cbiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4odXNlci5faWQudG9TdHJpbmcoKSwgdXNlci5yb2xlKVxuXG4gICAgLy8gUmVtb3ZlIHBhc3N3b3JkIGZyb20gdXNlciBvYmplY3RcbiAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVzZXI6IHVzZXJXaXRob3V0UGFzc3dvcmQsXG4gICAgICB0b2tlbixcbiAgICAgIG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bFwiLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQXV0aGVudGljYXRpb24gZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJVc2VyKHVzZXJEYXRhOiB7XG4gIG5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHBhc3N3b3JkOiBzdHJpbmdcbiAgbWF0cmljTnVtYmVyPzogc3RyaW5nXG4gIGRlcGFydG1lbnQ6IHN0cmluZ1xuICByb2xlOiBcInN0dWRlbnRcIiB8IFwibGVjdHVyZXJcIiB8IFwiYWRtaW5cIlxufSk6IFByb21pc2U8QXV0aFJlc3VsdD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHtcbiAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgIH0pXG5cbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWRcIiB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgbWF0cmljTnVtYmVyIGFscmVhZHkgZXhpc3RzIChmb3Igc3R1ZGVudHMpXG4gICAgaWYgKHVzZXJEYXRhLm1hdHJpY051bWJlcikge1xuICAgICAgY29uc3QgZXhpc3RpbmdNYXRyaWMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7XG4gICAgICAgIG1hdHJpY051bWJlcjogdXNlckRhdGEubWF0cmljTnVtYmVyLFxuICAgICAgfSlcblxuICAgICAgaWYgKGV4aXN0aW5nTWF0cmljKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk1hdHJpYyBudW1iZXIgYWxyZWFkeSByZWdpc3RlcmVkXCIgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhc2ggcGFzc3dvcmRcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2hQYXNzd29yZCh1c2VyRGF0YS5wYXNzd29yZClcblxuICAgIC8vIENyZWF0ZSB1c2VyIG9iamVjdFxuICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICBfaWQ6IG5ldyBPYmplY3RJZCgpLFxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgbWF0cmljTnVtYmVyOiB1c2VyRGF0YS5tYXRyaWNOdW1iZXIgfHwgbnVsbCxcbiAgICAgIGRlcGFydG1lbnQ6IHVzZXJEYXRhLmRlcGFydG1lbnQsXG4gICAgICByb2xlOiB1c2VyRGF0YS5yb2xlLFxuICAgICAgZmluZ2VycHJpbnRIYXNoOiBudWxsLFxuICAgICAgcHJvZmlsZVBpY3R1cmU6IG51bGwsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgdXNlciBpbnRvIGRhdGFiYXNlXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmluc2VydE9uZShuZXdVc2VyKVxuXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXG4gICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKG5ld1VzZXIuX2lkLnRvU3RyaW5nKCksIG5ld1VzZXIucm9sZSlcblxuICAgIC8vIFJlbW92ZSBwYXNzd29yZCBmcm9tIHJlc3BvbnNlXG4gICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gbmV3VXNlclxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB1c2VyV2l0aG91dFBhc3N3b3JkLFxuICAgICAgdG9rZW4sXG4gICAgICBtZXNzYWdlOiBcIlJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsXCIsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdpc3RyYXRpb24gZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlJlZ2lzdHJhdGlvbiBmYWlsZWRcIiB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7XG4gICAgICBfaWQ6IG5ldyBPYmplY3RJZCh1c2VySWQpLFxuICAgIH0pXG4gICAgcmV0dXJuIHVzZXIgYXMgVXNlciB8IG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR2V0IHVzZXIgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXIodXNlcklkOiBzdHJpbmcsIHVwZGF0ZURhdGE6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKClcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUoXG4gICAgICB7IF9pZDogbmV3IE9iamVjdElkKHVzZXJJZCkgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIC4uLnVwZGF0ZURhdGEsXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICApXG5cbiAgICByZXR1cm4gcmVzdWx0Lm1vZGlmaWVkQ291bnQgPiAwXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlVwZGF0ZSB1c2VyIGVycm9yOlwiLCBlcnJvcilcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIl0sIm5hbWVzIjpbImp3dCIsImJjcnlwdCIsIk9iamVjdElkIiwiZ2V0RGF0YWJhc2UiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIkpXVF9FWFBJUkVTX0lOIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0Um91bmRzIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJjb21wYXJlIiwiZ2VuZXJhdGVUb2tlbiIsInVzZXJJZCIsInJvbGUiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlcnJvciIsImF1dGhlbnRpY2F0ZVVzZXIiLCJlbWFpbCIsImRiIiwidXNlciIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwidG9Mb3dlckNhc2UiLCJzdWNjZXNzIiwibWVzc2FnZSIsImlzQWN0aXZlIiwiaXNWYWxpZFBhc3N3b3JkIiwiX2lkIiwidG9TdHJpbmciLCJfIiwidXNlcldpdGhvdXRQYXNzd29yZCIsImNvbnNvbGUiLCJyZWdpc3RlclVzZXIiLCJ1c2VyRGF0YSIsImV4aXN0aW5nVXNlciIsIm1hdHJpY051bWJlciIsImV4aXN0aW5nTWF0cmljIiwibmV3VXNlciIsIm5hbWUiLCJkZXBhcnRtZW50IiwiZmluZ2VycHJpbnRIYXNoIiwicHJvZmlsZVBpY3R1cmUiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiaW5zZXJ0T25lIiwiZ2V0VXNlckJ5SWQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlRGF0YSIsInJlc3VsdCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJtb2RpZmllZENvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware.ts":
/*!***************************!*\
  !*** ./lib/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"(rsc)/./lib/auth.ts\");\n\n\nfunction withAuth(handler) {\n    return async (req)=>{\n        try {\n            const authHeader = req.headers.get(\"authorization\");\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: \"No token provided\"\n                }, {\n                    status: 401\n                });\n            }\n            const token = authHeader.substring(7);\n            const decoded = (0,_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(token);\n            if (!decoded) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: \"Invalid token\"\n                }, {\n                    status: 401\n                });\n            }\n            req.user = decoded;\n            return await handler(req);\n        } catch (error) {\n            console.error(\"Auth middleware error:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"Authentication failed\"\n            }, {\n                status: 401\n            });\n        }\n    };\n}\nfunction requireRole(roles) {\n    return (handler)=>{\n        return withAuth(async (req)=>{\n            if (!req.user || !roles.includes(req.user.role)) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: \"Insufficient permissions\"\n                }, {\n                    status: 403\n                });\n            }\n            return await handler(req);\n        });\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTREO0FBQ3hCO0FBUzdCLFNBQVNFLFNBQVNDLE9BQTZEO0lBQ3BGLE9BQU8sT0FBT0M7UUFDWixJQUFJO1lBQ0YsTUFBTUMsYUFBYUQsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7WUFFbkMsSUFBSSxDQUFDRixjQUFjLENBQUNBLFdBQVdHLFVBQVUsQ0FBQyxZQUFZO2dCQUNwRCxPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO29CQUFFQyxTQUFTO29CQUFPQyxTQUFTO2dCQUFvQixHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1lBQzNGO1lBRUEsTUFBTUMsUUFBUVIsV0FBV1MsU0FBUyxDQUFDO1lBQ25DLE1BQU1DLFVBQVVkLGtEQUFXQSxDQUFDWTtZQUU1QixJQUFJLENBQUNFLFNBQVM7Z0JBQ1osT0FBT2YscURBQVlBLENBQUNTLElBQUksQ0FBQztvQkFBRUMsU0FBUztvQkFBT0MsU0FBUztnQkFBZ0IsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUN2RjtZQUVBUixJQUFJWSxJQUFJLEdBQUdEO1lBQ1gsT0FBTyxNQUFNWixRQUFRQztRQUN2QixFQUFFLE9BQU9hLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDBCQUEwQkE7WUFDeEMsT0FBT2pCLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBd0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQy9GO0lBQ0Y7QUFDRjtBQUVPLFNBQVNPLFlBQVlDLEtBQWU7SUFDekMsT0FBTyxDQUFDakI7UUFDTixPQUFPRCxTQUFTLE9BQU9FO1lBQ3JCLElBQUksQ0FBQ0EsSUFBSVksSUFBSSxJQUFJLENBQUNJLE1BQU1DLFFBQVEsQ0FBQ2pCLElBQUlZLElBQUksQ0FBQ00sSUFBSSxHQUFHO2dCQUMvQyxPQUFPdEIscURBQVlBLENBQUNTLElBQUksQ0FBQztvQkFBRUMsU0FBUztvQkFBT0MsU0FBUztnQkFBMkIsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNsRztZQUNBLE9BQU8sTUFBTVQsUUFBUUM7UUFDdkI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWN1LXN0dWRlbnQtdXRpbGl0eS8uL2xpYi9taWRkbGV3YXJlLnRzPzk3OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSBcIi4vYXV0aFwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aGVudGljYXRlZFJlcXVlc3QgZXh0ZW5kcyBOZXh0UmVxdWVzdCB7XG4gIHVzZXI/OiB7XG4gICAgdXNlcklkOiBzdHJpbmdcbiAgICByb2xlOiBzdHJpbmdcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGgoaGFuZGxlcjogKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPikge1xuICByZXR1cm4gYXN5bmMgKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QpOiBQcm9taXNlPE5leHRSZXNwb25zZT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKVxuXG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTm8gdG9rZW4gcHJvdmlkZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNylcbiAgICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbilcblxuICAgICAgaWYgKCFkZWNvZGVkKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgdG9rZW5cIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgICB9XG5cbiAgICAgIHJlcS51c2VyID0gZGVjb2RlZFxuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBtaWRkbGV3YXJlIGVycm9yOlwiLCBlcnJvcilcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKHJvbGVzOiBzdHJpbmdbXSkge1xuICByZXR1cm4gKGhhbmRsZXI6IChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0KSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT4pID0+IHtcbiAgICByZXR1cm4gd2l0aEF1dGgoYXN5bmMgKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QpID0+IHtcbiAgICAgIGlmICghcmVxLnVzZXIgfHwgIXJvbGVzLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9uc1wiIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBoYW5kbGVyKHJlcSlcbiAgICB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidmVyaWZ5VG9rZW4iLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ0b2tlbiIsInN1YnN0cmluZyIsImRlY29kZWQiLCJ1c2VyIiwiZXJyb3IiLCJjb25zb2xlIiwicmVxdWlyZVJvbGUiLCJyb2xlcyIsImluY2x1ZGVzIiwicm9sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nif (true) {\n    const globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\n// Database helper functions\nasync function getDatabase() {\n    const client = await clientPromise;\n    return client.db(\"acu_student_portal\");\n}\nasync function connectToDatabase() {\n    try {\n        const client = await clientPromise;\n        const db = client.db(\"acu_student_portal\");\n        // Test the connection\n        await db.admin().ping();\n        console.log(\"✅ Connected to MongoDB successfully\");\n        return {\n            client,\n            db\n        };\n    } catch (error) {\n        console.error(\"❌ MongoDB connection failed:\", error);\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QztBQUU5QyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxFQUFFO0lBQzVCLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVBLE1BQU1DLE1BQU1KLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztBQUNuQyxNQUFNRyxVQUFVLENBQUM7QUFFakIsSUFBSUM7QUFDSixJQUFJQztBQUVKLElBQUlQLElBQXNDLEVBQUU7SUFFMUMsTUFBTVEsa0JBQWtCQztJQUl4QixJQUFJLENBQUNELGdCQUFnQkUsbUJBQW1CLEVBQUU7UUFDeENKLFNBQVMsSUFBSVAsZ0RBQVdBLENBQUNLLEtBQUtDO1FBQzlCRyxnQkFBZ0JFLG1CQUFtQixHQUFHSixPQUFPSyxPQUFPO0lBQ3REO0lBQ0FKLGdCQUFnQkMsZ0JBQWdCRSxtQkFBbUI7QUFDckQsT0FBTyxFQUdOO0FBRUQsNEJBQTRCO0FBQ3JCLGVBQWVFO0lBQ3BCLE1BQU1OLFNBQVMsTUFBTUM7SUFDckIsT0FBT0QsT0FBT08sRUFBRSxDQUFDO0FBQ25CO0FBRU8sZUFBZUM7SUFDcEIsSUFBSTtRQUNGLE1BQU1SLFNBQVMsTUFBTUM7UUFDckIsTUFBTU0sS0FBS1AsT0FBT08sRUFBRSxDQUFDO1FBRXJCLHNCQUFzQjtRQUN0QixNQUFNQSxHQUFHRSxLQUFLLEdBQUdDLElBQUk7UUFDckJDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE9BQU87WUFBRVo7WUFBUU87UUFBRztJQUN0QixFQUFFLE9BQU9NLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsTUFBTUE7SUFDUjtBQUNGO0FBRUEsaUVBQWVaLGFBQWFBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hY3Utc3R1ZGVudC11dGlsaXR5Ly4vbGliL21vbmdvZGIudHM/MDViZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCwgdHlwZSBEYiB9IGZyb20gXCJtb25nb2RiXCJcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQvTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZTogXCJNT05HT0RCX1VSSVwiJylcbn1cblxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUklcbmNvbnN0IG9wdGlvbnMgPSB7fVxuXG5sZXQgY2xpZW50OiBNb25nb0NsaWVudFxubGV0IGNsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gIFxuICBjb25zdCBnbG9iYWxXaXRoTW9uZ28gPSBnbG9iYWwgYXMgdHlwZW9mIGdsb2JhbFRoaXMgJiB7XG4gICAgX21vbmdvQ2xpZW50UHJvbWlzZT86IFByb21pc2U8TW9uZ29DbGllbnQ+XG4gIH1cblxuICBpZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucylcbiAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2Vcbn0gZWxzZSB7XG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXG4gIGNsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpXG59XG5cbi8vIERhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYXRhYmFzZSgpOiBQcm9taXNlPERiPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2VcbiAgcmV0dXJuIGNsaWVudC5kYihcImFjdV9zdHVkZW50X3BvcnRhbFwiKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZVxuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiYWN1X3N0dWRlbnRfcG9ydGFsXCIpXG5cbiAgICAvLyBUZXN0IHRoZSBjb25uZWN0aW9uXG4gICAgYXdhaXQgZGIuYWRtaW4oKS5waW5nKClcbiAgICBjb25zb2xlLmxvZyhcIuKchSBDb25uZWN0ZWQgdG8gTW9uZ29EQiBzdWNjZXNzZnVsbHlcIilcblxuICAgIHJldHVybiB7IGNsaWVudCwgZGIgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJFcnJvciIsInVyaSIsIm9wdGlvbnMiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJnZXREYXRhYmFzZSIsImRiIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJhZG1pbiIsInBpbmciLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/semver@7.7.2","vendor-chunks/bcryptjs@3.0.2","vendor-chunks/jsonwebtoken@9.0.2","vendor-chunks/lodash.includes@4.3.0","vendor-chunks/jws@3.2.2","vendor-chunks/lodash.once@4.1.1","vendor-chunks/jwa@1.4.2","vendor-chunks/lodash.isinteger@4.0.4","vendor-chunks/ecdsa-sig-formatter@1.0.11","vendor-chunks/lodash.isplainobject@4.0.6","vendor-chunks/ms@2.1.3","vendor-chunks/lodash.isstring@4.0.1","vendor-chunks/lodash.isnumber@3.0.3","vendor-chunks/lodash.isboolean@3.0.3","vendor-chunks/safe-buffer@5.2.1","vendor-chunks/buffer-equal-constant-time@1.0.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDownloads%5CCompressed%5Cacu-student-utility_4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();